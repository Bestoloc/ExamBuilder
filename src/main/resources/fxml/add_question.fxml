<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.effect.*?>
<?import javafx.collections.*?>

<?import java.lang.String?>
<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.examsystem.controllers.AddQuestionController"
            style="-fx-background-color: linear-gradient(to bottom right, #0f172a, #1e293b);" stylesheets="@/style.css">

    <top>
        <VBox>
            <!-- Ð¨Ð°Ð¿ÐºÐ° -->
            <StackPane style="-fx-background-color: linear-gradient(to right, #3b82f6, #2563eb);
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 3);">
                <HBox style="-fx-padding: 20 30;" alignment="CENTER_LEFT" spacing="15">
                    <Button text="â† ÐÐ°Ð·Ð°Ð´"
                            style="-fx-background-color: #ffffff1a; -fx-text-fill: white;
                                  -fx-font-weight: bold; -fx-background-radius: 8;
                                  -fx-padding: 8 20; -fx-cursor: hand;"
                            onAction="#handleBack">
                        <effect>
                            <DropShadow radius="2" offsetX="1" offsetY="1" color="rgba(0,0,0,0.2)"/>
                        </effect>
                    </Button>

                    <Region HBox.hgrow="ALWAYS"/>

                    <HBox alignment="CENTER" spacing="12">
                        <Label text="âž•" style="-fx-text-fill: white; -fx-font-size: 20;"/>
                        <Label text="Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°"
                               style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 20;"/>
                    </HBox>

                    <Region HBox.hgrow="ALWAYS"/>
                    <Pane prefWidth="100"/>
                </HBox>
            </StackPane>
        </VBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true"
                    style="-fx-background: transparent; -fx-background-color: transparent; -fx-border-color: transparent;">
            <VBox spacing="25" style="-fx-padding: 10;" prefWidth="900">
                <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ñ„Ð¾Ñ€Ð¼Ð° -->
                <StackPane>
                    <Rectangle width="900" arcWidth="20" arcHeight="20"
                               fill="#1e293b">
                        <effect>
                            <DropShadow radius="20" color="rgba(0,0,0,0.15)" offsetY="5"/>
                        </effect>
                    </Rectangle>

                    <VBox spacing="25" style="-fx-padding: 35;">
                        <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <StackPane>
                                <Circle radius="22" fill="#3b82f6" opacity="0.2"/>
                                <Label text="â“" style="-fx-text-fill: white; -fx-font-size: 18;"/>
                            </StackPane>
                            <VBox spacing="3">
                                <Label text="Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°"
                                       style="-fx-text-fill: #f1f5f9; -fx-font-size: 20; -fx-font-weight: bold;"/>
                                <Label text="Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð²ÑÐµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ (*)"
                                       style="-fx-text-fill: #94a3b8; -fx-font-size: 13;"/>
                            </VBox>
                        </HBox>

                        <!-- Ð¤Ð¾Ñ€Ð¼Ð° -->
                        <GridPane hgap="20" vgap="18">
                            <columnConstraints>
                                <ColumnConstraints prefWidth="180"/>
                                <ColumnConstraints prefWidth="300"/>
                                <ColumnConstraints prefWidth="40"/>
                            </columnConstraints>

                            <!-- ÐŸÑ€ÐµÐ´Ð¼ÐµÑ‚ -->
                            <Label text="ÐŸÑ€ÐµÐ´Ð¼ÐµÑ‚ *" GridPane.rowIndex="0" GridPane.columnIndex="0"
                                   style="-fx-text-fill: #e2e8f0; -fx-font-size: 14; -fx-font-weight: bold;"/>
                            <HBox GridPane.rowIndex="0" GridPane.columnIndex="1" spacing="10">
                                <ComboBox fx:id="subjectComboBox" promptText="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚"
                                          HBox.hgrow="ALWAYS"
                                          style="-fx-background-color: #0f172a; -fx-background-radius: 8;
                                          -fx-border-color: #475569; -fx-border-radius: 8;
                                          -fx-border-width: 1; -fx-padding: 12; -fx-text-fill: #f1f5f9;
                                          -fx-prompt-text-fill: #64748b;">
                                </ComboBox>
                                <Button text="âž•" fx:id="btnAddSubject"
                                        style="-fx-background-color: #10b981; -fx-text-fill: white;
                                              -fx-font-weight: bold; -fx-background-radius: 8;
                                              -fx-padding: 12 12; -fx-cursor: hand; -fx-min-width: 40;"
                                        onAction="#handleAddSubject">
                                    <effect>
                                        <DropShadow radius="3" offsetX="2" offsetY="2" color="rgba(16,185,129,0.3)"/>
                                    </effect>
                                </Button>
                            </HBox>

                            <!-- Ð¢ÐµÐ¼Ð° -->
                            <Label text="Ð¢ÐµÐ¼Ð° *" GridPane.rowIndex="1" GridPane.columnIndex="0"
                                   style="-fx-text-fill: #e2e8f0; -fx-font-size: 14; -fx-font-weight: bold;"/>
                            <HBox GridPane.rowIndex="1" GridPane.columnIndex="1" spacing="10">
                                <ComboBox fx:id="topicComboBox" promptText="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚ÐµÐ¼Ñƒ"
                                          HBox.hgrow="ALWAYS"
                                          style="-fx-background-color: #0f172a; -fx-background-radius: 8;
                                          -fx-border-color: #475569; -fx-border-radius: 8;
                                          -fx-border-width: 1; -fx-padding: 12;
                                          -fx-text-fill: #f1f5f9; -fx-prompt-text-fill: #64748b;">
                                </ComboBox>
                                <Button text="âž•" fx:id="btnAddTopic"
                                        style="-fx-background-color: #f59e0b; -fx-text-fill: white;
                                              -fx-font-weight: bold; -fx-background-radius: 8;
                                              -fx-padding: 12 12; -fx-cursor: hand; -fx-min-width: 40;"
                                        onAction="#handleAddTopic">
                                    <effect>
                                        <DropShadow radius="3" offsetX="2" offsetY="2" color="rgba(245,158,11,0.3)"/>
                                    </effect>
                                </Button>
                            </HBox>

                            <!-- Ð¢Ð¸Ð¿ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ° -->
                            <Label text="Ð¢Ð¸Ð¿ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ° *" GridPane.rowIndex="2" GridPane.columnIndex="0"
                                   style="-fx-text-fill: #e2e8f0; -fx-font-size: 14; -fx-font-weight: bold;"/>
                            <ComboBox fx:id="typeComboBox" promptText="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿"
                                      GridPane.rowIndex="2" GridPane.columnIndex="1" GridPane.columnSpan="2"
                                      style="-fx-background-color: #0f172a; -fx-background-radius: 8;
                                      -fx-border-color: #475569; -fx-border-radius: 8;
                                      -fx-border-width: 1; -fx-padding: 12; -fx-text-fill: #f1f5f9;
                                      -fx-prompt-text-fill: #64748b;">
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="Ð¢ÐµÐ¾Ñ€ÐµÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹"/>
                                        <String fx:value="ÐŸÑ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹"/>
                                        <String fx:value="Ð—Ð°Ð´Ð°Ñ‡Ð°"/>
                                        <String fx:value="Ð¢ÐµÑÑ‚"/>
                                    </FXCollections>
                                </items>
                            </ComboBox>

                            <!-- Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ -->
                            <Label text="Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ *" GridPane.rowIndex="3" GridPane.columnIndex="0"
                                   style="-fx-text-fill: #e2e8f0; -fx-font-size: 14; -fx-font-weight: bold;"/>
                            <HBox spacing="20" GridPane.rowIndex="3" GridPane.columnIndex="1" GridPane.columnSpan="2">
                                <fx:define>
                                    <ToggleGroup fx:id="difficultyGroup"/>
                                </fx:define>
                                <RadioButton text="Ð›ÐµÐ³ÐºÐ¸Ð¹ (1)" toggleGroup="$difficultyGroup"
                                             userData="1" style="-fx-text-fill: #10b981; -fx-font-weight: bold;"/>
                                <RadioButton text="Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹ (2)" toggleGroup="$difficultyGroup"
                                             userData="2" style="-fx-text-fill: #f59e0b; -fx-font-weight: bold;"/>
                                <RadioButton text="Ð¡Ð»Ð¾Ð¶Ð½Ñ‹Ð¹ (3)" toggleGroup="$difficultyGroup"
                                             userData="3" style="-fx-text-fill: #ef4444; -fx-font-weight: bold;"/>
                            </HBox>
                        </GridPane>

                        <!-- Ð¢ÐµÐºÑÑ‚ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ° -->
                        <VBox spacing="8">
                            <Label text="Ð¢ÐµÐºÑÑ‚ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ° *" style="-fx-text-fill: #e2e8f0; -fx-font-size: 14; -fx-font-weight: bold;"/>
                            <TextArea fx:id="questionTextArea" promptText="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ‚ÐµÐºÑÑ‚ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°..."
                                      prefHeight="120" wrapText="true"
                                      style="-fx-control-inner-background: #334155;
                     -fx-background-color: #334155;
                     -fx-background-radius: 8;
                     -fx-border-color: #475569;
                     -fx-border-radius: 8;
                     -fx-border-width: 1;
                     -fx-padding: 10;
                     -fx-text-fill: #f1f5f9;
                     -fx-prompt-text-fill: #94a3b8;
                     -fx-focus-color: #3b82f6;
                     -fx-faint-focus-color: #3b82f622;"/>
                        </VBox>

                        <!-- ÐžÑ‚Ð²ÐµÑ‚ -->
                        <VBox spacing="8">
                            <Label text="ÐžÑ‚Ð²ÐµÑ‚ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)" style="-fx-text-fill: #e2e8f0; -fx-font-size: 14; -fx-font-weight: bold;"/>
                            <TextArea fx:id="answerTextArea" promptText="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚..."
                                      prefHeight="100" wrapText="true"
                                      style="-fx-control-inner-background: #334155;
                     -fx-background-color: #334155;
                     -fx-background-radius: 8;
                     -fx-border-color: #475569;
                     -fx-border-radius: 8;
                     -fx-border-width: 1;
                     -fx-padding: 10;
                     -fx-text-fill: #f1f5f9;
                     -fx-prompt-text-fill: #94a3b8;
                     -fx-focus-color: #3b82f6;
                     -fx-faint-focus-color: #3b82f622;"/>
                        </VBox>

                        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ -->
                        <HBox spacing="15" alignment="CENTER_RIGHT" style="-fx-padding: 20 0 0 0;">
                            <Button text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ñ„Ð¾Ñ€Ð¼Ñƒ"
                                    style="-fx-background-color: #64748b; -fx-text-fill: white;
                                          -fx-font-weight: bold; -fx-background-radius: 8;
                                          -fx-padding: 12 25; -fx-cursor: hand;"
                                    onAction="#handleClear">
                                <effect>
                                    <DropShadow radius="3" offsetX="2" offsetY="2" color="rgba(100,116,139,0.3)"/>
                                </effect>
                            </Button>

                            <Button text="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð²Ð¾Ð¿Ñ€Ð¾Ñ" fx:id="saveButton"
                                    style="-fx-background-color: #3b82f6; -fx-text-fill: white;
                                          -fx-font-weight: bold; -fx-background-radius: 8;
                                          -fx-padding: 12 30; -fx-cursor: hand;"
                                    onAction="#handleSaveQuestion">
                                <effect>
                                    <DropShadow radius="5" offsetX="2" offsetY="2" color="rgba(59,130,246,0.3)"/>
                                </effect>
                            </Button>
                        </HBox>
                    </VBox>
                </StackPane>

                <!-- ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ -->
                <StackPane>
                    <Rectangle arcWidth="15" arcHeight="15" width="900"
                               fill="#1e293b">
                        <effect>
                            <DropShadow radius="15" color="rgba(0,0,0,0.15)" offsetY="5"/>
                        </effect>
                    </Rectangle>
                    <VBox spacing="15" style="-fx-padding: 25;">
                        <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° -->
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <StackPane>
                                <Circle radius="18" fill="#8b5cf6" opacity="0.2"/>
                                <Label text="ðŸ‘ï¸" style="-fx-text-fill: white; -fx-font-size: 14;"/>
                            </StackPane>
                            <VBox spacing="2">
                                <Label text="ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°"
                                       style="-fx-text-fill: #f1f5f9; -fx-font-size: 18; -fx-font-weight: bold;"/>
                                <Label text="ÐšÐ°Ðº Ð±ÑƒÐ´ÐµÑ‚ Ð²Ñ‹Ð³Ð»ÑÐ´ÐµÑ‚ÑŒ Ð²Ð¾Ð¿Ñ€Ð¾Ñ"
                                       style="-fx-text-fill: #94a3b8; -fx-font-size: 12;"/>
                            </VBox>
                        </HBox>

                        <!-- ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ -->
                        <VBox spacing="12" style="-fx-background-color: #0f172a; -fx-background-radius: 8;
                                                  -fx-padding: 20; -fx-border-color: #334155;
                                                  -fx-border-width: 1; -fx-border-radius: 8;">
                            <HBox spacing="10">
                                <Label text="ÐŸÑ€ÐµÐ´Ð¼ÐµÑ‚:" style="-fx-font-weight: bold; -fx-text-fill: #cbd5e0;"/>
                                <Label fx:id="previewSubjectLabel" text="ÐÐµ Ð²Ñ‹Ð±Ñ€Ð°Ð½" style="-fx-text-fill: #94a3b8;"/>
                            </HBox>
                            <HBox spacing="10">
                                <Label text="Ð¢ÐµÐ¼Ð°:" style="-fx-font-weight: bold; -fx-text-fill: #cbd5e0;"/>
                                <Label fx:id="previewTopicLabel" text="ÐÐµ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð°" style="-fx-text-fill: #94a3b8;"/>
                            </HBox>
                            <HBox spacing="10">
                                <Label text="Ð¢Ð¸Ð¿:" style="-fx-font-weight: bold; -fx-text-fill: #cbd5e0;"/>
                                <Label fx:id="previewTypeLabel" text="ÐÐµ Ð²Ñ‹Ð±Ñ€Ð°Ð½" style="-fx-text-fill: #94a3b8;"/>
                            </HBox>
                            <HBox spacing="10">
                                <Label text="Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ:" style="-fx-font-weight: bold; -fx-text-fill: #cbd5e0;"/>
                                <Label fx:id="previewDifficultyLabel" text="ÐÐµ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð°" style="-fx-text-fill: #94a3b8;"/>
                            </HBox>

                            <Separator style="-fx-background-color: #334155;"/>

                            <VBox spacing="5">
                                <Label text="Ð’Ð¾Ð¿Ñ€Ð¾Ñ:" style="-fx-font-weight: bold; -fx-text-fill: #cbd5e0;"/>
                                <TextArea fx:id="previewQuestionText" editable="false" wrapText="true"
                                          style="-fx-control-inner-background: #334155;
                     -fx-background-color: #334155;
                     -fx-background-radius: 8;
                     -fx-border-color: #475569;
                     -fx-border-radius: 8;
                     -fx-border-width: 1;
                     -fx-padding: 10;
                     -fx-text-fill: #f1f5f9;
                     -fx-prompt-text-fill: #94a3b8;
                     -fx-focus-color: #3b82f6;
                     -fx-faint-focus-color: #3b82f622;"/>
                            </VBox>
                        </VBox>
                    </VBox>
                </StackPane>
            </VBox>
        </ScrollPane>
    </center>

</BorderPane>